<?php

namespace jpuck\avhost\Core\Utils;

class Signature
{
    protected $version;
    protected $datetime;
    protected $user;

    protected $header = <<<HEADER
##########################################
# Generated by avhost
# https://github.com/jpuck/avhost

HEADER;

    protected $footer = <<<FOOTER
##########################################

FOOTER;

    public function render() : string
    {
        $attributes = [
            'version' => (new Version)->getVersion(),
            'created at' => date('c'),
            'created by' => trim(`whoami`) . '@' . gethostname(),
        ];

        $string = '';
        foreach ($attributes as $key => $value) {
            $string .= $this->getKeyValueLine($key, $value);
        }

        return $this->header . $string . $this->footer;
    }

    public function getKeyValueLine(string $key, string $value) : string
    {
        return "# $key $value".PHP_EOL;
    }
}
